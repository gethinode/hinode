{{/* 
    Copyright Â© 2025 - 2026 The Hinode Team / Mark Dumay. All rights reserved.
    Use of this source code is governed by The MIT License (MIT) that can be found in the LICENSE file.
    Visit gethinode.com/license for more details.

	Note: To support live editing, bookshop components should use a clear path to the provided arguments.
	Therefore, we cannot use the InitArgs partial at this point, and we need to access each argument
	directly. See the docs for more background:
	https://github.com/CloudCannon/bookshop/blob/main/guides/hugo.adoc#passing-data-to-bookshop-components
*/}}

{{/* Initialize global arguments */}}
{{- $padding := partial "utilities/GetPadding.html" -}}

{{ define "_partials/inline/accordion-faq.html" }}
	{{ $id := .id }}
	{{ $contrast := .contrast }}
	{{ $class := .class }}
	{{ $color := .color }}
	{{ $items := .items }}
	
	<div id="{{ $id }}" class="accordion accordion-faq {{ if $contrast }}accordion-faq-contrast text-white {{ end -}}
		accordion-flush{{ with $class }} {{ . }}{{ end }} col-12 col-md-6 mx-auto">
		{{ range $index, $item := $items }}
			<div class="accordion-item">
				{{- with $item.title -}}
					<div class="accordion-header m-0" id="{{ $id }}-heading-{{ $id }}">
						<button class="accordion-button collapsed" 
							type="button" 
							data-bs-toggle="collapse"
							data-bs-target="#{{ $id }}-item-{{ $index }}"
							aria-expanded="false"
							aria-controls="{{ $id }}-item-{{ $index }}"
						>
						{{ if $color }}<div class="text-{{ $color }}">{{ . }}</div>{{ else }}{{ . }}{{ end }}
						</button>
					</div>
				{{- end -}}
				<div id="{{ $id }}-item-{{ $index }}" 
					class="accordion-collapse collapse"
					aria-labelledby="{{ $id }}-heading-{{ $index }}"
					data-bs-parent="#{{ $id }}"
				>
					<div class="accordion-body">{{ $item.description | page.RenderString | safeHTML }}</div>
				</div>
			</div>
		{{ end }}
	</div>
{{ end }}

{{/* Main code */}}
{{ $color := "" }}
{{ if .contrast }}{{ $color = "white" }}{{ end }}
{{- $raw := partial "assets/section-title.html" (dict
	"heading" .heading
	"justify" .justify
	"class"   (printf "pb-%d" $padding.y))
-}}

{{ $class := "" }}
{{ $id := printf "faq-%s" (md5 (delimit (slice . now) "-")) }}

{{ $raw = printf "%s%s" $raw (partial "inline/accordion-faq.html" (dict
	"id"       $id
	"contrast" .contrast
	"class"    .class
	"color"    .color
	"items"    .items
)) }}

{{ if $raw }}
	{{ partial "utilities/section.html" (dict 
		"component-name" "faw"
		"id"             .id
		"raw"            $raw
		"background"     .background
		"width"          .width
		"justify"        .justify
		"wrapper"        .wrapper
		"fluid"          .fluid
		"theme"          .theme
		"cover"          .cover
		"overlay-mode"   (or .overlay_mode (index . "overlay-mode"))
		"section-class"  (or .section_class (index . "section-class"))
		"bg-class"       (or .bg_class (index . "bg-class"))
	)}}
{{ end }}